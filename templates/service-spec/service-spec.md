# {プロダクト名} サービス仕様書

## 1. サービス概要

### 1.1 プロダクトビジョン

<!-- 一文でプロダクトの存在意義を記述する -->

### 1.2 解決する課題

<!-- このプロダクトが解決する具体的な課題を列挙する -->

### 1.3 ターゲットユーザー

<!-- 誰がこのプロダクトを使うのかを明記する -->

### 1.4 ユーザー体験の全体像

<!-- ユーザーがプロダクトを使う一連の流れを記述する -->

## 2. E2Eテスト要件

<!--
  本章は完成版プロダクトに対する全体E2Eテストのシナリオを定義する。
  開発ロードマップ（§4）の最終RFCはこのE2Eテストを実施するRFCである。

  記述ルール:
  - 実行手順はCLIコマンド実行・API呼び出し・スクリプト実行等、
    自動実行可能な具体的手順として記述すること
  - 期待結果はファイル出力・レスポンス内容・外部サービスの状態変化等、
    プログラムから検証可能な形で記述すること

  禁止事項:
  - モック・スタブ・スパイを前提としたシナリオ
  - 内部状態の検証（外部から観測可能な最終結果のみ記述すること）
  - テストフレームワーク固有の記法（jest, vitest 等）
-->

| ID | シナリオ名 | 前提条件 | 実行手順 | 期待結果 |
|----|-----------|---------|---------|---------|
| E2E-001 | {シナリオ名} | {テスト実行前の状態・データ} | {自動実行する具体的手順} | {検証可能な最終結果} |

## 3. スコープ外要件

<!-- このプロダクトで明示的に対応しない要件を列挙する。AIの過剰実装を防止する目的。 -->

- {スコープ外項目1}: {除外理由}

## 4. 開発ロードマップ

### 4.1 必要な環境情報

<!--
  開発開始前に人間が入手し、config等に設定すべき環境情報を列挙する。
  この情報が揃うまで実装を開始してはならない。
  AIがモック値やダミー値で代替することを禁止する。
-->

| 物理名 | 説明 | 入手方法 | 設定先 |
|--------|------|---------|--------|
| `{ENV_VAR_NAME}` | {この値が何を表すか} | {どこから取得するか} | `config.yml` |

### 4.2 事前の人間タスク

<!--
  開発開始前に人間が完了すべきタスクを列挙する。
  これらが完了するまで実装を開始してはならない。
  AIがモックやスタブで代替することを禁止する。
-->

- [ ] {タスク}: {詳細・完了条件}

### 4.3 RFC 一覧

<!--
  /adev パース対象テーブル。
  最終行は必ず「全体E2Eテスト実施」RFCとすること。
  このRFCは §2 に定義したE2Eテストシナリオをすべて実行し、
  プロダクト全体の品質を検証する。
-->

| slug | 概要 | 依存 |
|------|------|------|
| `{slug-1}` | {RFC1の概要} | - |
| `{slug-e2e}` | 全体E2Eテスト実施 | `{slug-N}` |

## 5. 技術アーキテクチャ

### 5.1 技術スタック

| カテゴリ | 技術 | 選定理由 |
|---------|------|---------|
| 言語 | {言語} | {理由} |
| ランタイム | {ランタイム} | {理由} |

### 5.2 システム構成

<!-- システムの構成要素とその関係を記述する -->

## 6. ドメイン設計

<!--
  自由記述。プロダクト固有の設計要素を記載する。
  例: アルゴリズム設計、エージェント構成、ビジネスルール、
      外部インターフェース設計（CLI / API / 通知 / UI 等）
-->

## 7. データ設計

### 7.1 主要エンティティ

<!-- ドメインの主要なデータ構造を定義する -->

### 7.2 データ取得・管理戦略

<!-- 該当時のみ。外部データソースからの取得方法、キャッシュ戦略等 -->

## 8. 運用設計

### 8.1 ディレクトリ構成

```
{project-root}/
├── src/
├── test/
├── config.yml
├── logs/
└── ...
```

### 8.2 gitignore 設計

<!--
  以下の原則に従うこと:
  1. csync コマンドで正本（vdev リポジトリ）からコピーされるファイル群は
     gitignore に含めること（.claude/ 配下、CLAUDE.md）
  2. 個人情報・個人の嗜好情報・環境固有の設定値を含むファイルは
     gitignore に含めること
-->

```gitignore
# csync 管理ファイル（正本は vdev リポジトリ）
.claude/
CLAUDE.md

# 環境固有・個人情報を含むファイル
config.yml
.env

# ログ
logs/
```

### 8.3 ログ設計

<!--
  ログ設計は必須。以下の3要件をすべて満たすこと:
  1. ファイル出力: console出力のみで済ませず、ログファイルとして出力すること
  2. ローテーション: サイズベースまたは日次でログファイルをローテートすること
     （参考実装: ~/projects/abel/src/helpers/logger.js）
  3. 構造化ログ: JSON形式で出力し、機械的に解析可能とすること

  推奨フィールド: ts（ISO 8601）, level, component, msg + 任意の構造化フィールド
-->

| 項目 | 設計 |
|------|------|
| 出力先 | `logs/{app}-YYYY-MM-DD.log` |
| フォーマット | JSON Lines（1行1JSONオブジェクト） |
| ローテーション | サイズベース: {閾値}MB / {世代}世代 |
| 保持期間 | {日数}日 |
| ログレベル | DEBUG, INFO, WARN, ERROR |
