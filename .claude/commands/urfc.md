# /urfc - RFC更新コマンド

レビュー指摘に基づき、RFCドキュメントを修正せよ。

## 対象slug

$ARGUMENTS

## 実行手順

### Step 1: slug の取得

上記「対象slug」が空の場合は、「更新対象のslugを入力してください。」とだけ表示し、ユーザの次のメッセージを待て。

### Step 2: ブランチ確認

現在のブランチが `feature/<slug>` であることを確認せよ。異なる場合は `feature/<slug>` にチェックアウトせよ。

### Step 3: RFC・レビュー結果の読み込み

カレントリポジトリのルート（`git rev-parse --show-toplevel`）を基準に、以下を全て読み込め:
- `docs/rfcs/<slug>/rfc.md`（RFC本文）
- `docs/rfcs/<slug>/review-*.md`（全レビュー結果）

レビューファイルが存在しない場合はエラーを報告して終了せよ。

### Step 4: コードベース調査

レビュー指摘に関連するコードベースを調査し、修正方針の妥当性を確認せよ。

### Step 5: RFC修正

1. `~/projects/vdev/prompts/roles/rfc-author.md` を読み込み、その人格に切り替わる。
2. 各レビューの指摘事項（P0 / P1）を分析し、RFC を修正する。
3. P0（Blocker）は必ず対応すること。P1（Nit）は妥当であれば反映すること。
4. 修正した内容を `docs/rfcs/<slug>/rfc.md` に書き込む。

### Step 6: DoD自己チェック

修正後のRFCが以下の完了定義を満たしているか自己チェックし、不足があれば補完せよ。

- [ ] 背景・動機が記述されていること
- [ ] 目的・スコープ（Goals / Non-Goals）が明確であること
- [ ] 具体的な設計案が記述されていること
- [ ] 代替案とその比較（トレードオフ）が示されていること
- [ ] 実装・リリース計画に検証方法が含まれていること

### Step 7: コミット & プッシュ

1. `docs/rfcs/<slug>/rfc.md` をステージングする。
2. コミットメッセージ `docs: revise RFC for <slug>` でコミットする。
3. `feature/<slug>` ブランチをリモートにプッシュする。
4. 「RFC を修正しました。`/rrfc <slug>` で再レビューを実行してください。」とユーザに報告せよ。
