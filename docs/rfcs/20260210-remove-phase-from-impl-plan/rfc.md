# [RFC] RFCテンプレート9節からフェーズ分割を排除し平坦な作業項目構造に変更

| 項目 | 内容 |
| :--- | :--- |
| **作成者 (Author)** | Claude (RFC Author) |
| **ステータス** | Accepted (承認済) |
| **作成日** | 2026-02-10 |
| **タグ** | templates, process |
| **関連リンク** | なし |

## 1. 要約 (Summary)

- RFCテンプレート `templates/rfc/rfc-default.md` の9節「実装・リリース計画 (Implementation Plan)」が Phase（フェーズ）分割を誘導する記述になっている。Phase 分割は Goals の Verification を先送りする正当化手段として悪用可能であり、実益の実績もない。本提案は9節から Phase/フェーズの概念を完全に排除し、「変更対象ファイルと作業項目の一覧」「依存関係と実施順序」「ロールバック基準と手順」という平坦な構造に変更する。

## 2. 背景・動機 (Motivation)

- RFCテンプレートの9節は現在以下の記述である:
  ```
  - {フェーズ分割（段階的リリースの場合）}
  - {各フェーズの成果物とマイルストーン}
  - {リスク軽減策（フィーチャーフラグ、段階ロールアウト等）}
  ```
- この記述は Phase 分割を暗に誘導する。実際の運用において「Phase 1 = 実装、Phase 2 = 検証」のように分離されることで、`/imp` の Step 7 (Goals 達成確認) 時点で「Phase 2 で検証予定」と書き、Verification を先送りすることが構造的に可能になる。
- 既存RFCのコードベース調査の結果、実際の RFC ドキュメント内で Phase 分割を活用した実績は確認できなかった。テンプレートのプレースホルダが残るのみであり、Phase 分割が実益につながったケースはない。
- 段階的リリースやフィーチャーフラグへの言及も9節に含まれているが、これらが必要な場合はセクション7.4「マイグレーションと後方互換性」で扱えば十分である。

## 3. 目的とスコープ (Goals & Non-Goals)

### 目的 (Goals)

| # | Goal | 達成確認方法 (Verification) |
|---|------|-----------------------------|
| G1 | テンプレート9節から Phase/フェーズの概念が完全に排除されていること | `templates/rfc/rfc-default.md` の9節を読み込み、「フェーズ」「Phase」「段階的リリース」「フィーチャーフラグ」「段階ロールアウト」「マイルストーン」のいずれも含まれていないことを grep で確認する |
| G2 | テンプレート9節が「変更対象ファイルと作業項目の一覧」「依存関係と実施順序」「ロールバック基準と手順」の3項目で構成されていること | `templates/rfc/rfc-default.md` の9節を読み込み、上記3項目がプレースホルダとして記載されていることを目視で確認する |

### やらないこと (Non-Goals)

- `/imp` の Step 7 や `impl-review.md` のレビュー基準への変更は本 RFC のスコープ外である。Verification 先送り問題の根本対策は別途検討する。
- `aimp.md` や `fix.md` 等のコマンド定義内で使われている Phase 表記はコマンドの実行手順であり、RFC テンプレートとは無関係のため変更しない。
- 既存の RFC ドキュメント（`docs/rfcs/` 配下）の遡及修正は行わない。

## 4. 前提条件・依存関係 (Prerequisites & Dependencies)

- 前提条件・依存関係はない。テンプレートファイル1つの変更のみであり、外部依存はない。

## 5. 詳細設計 (Detailed Design)

### 変更対象

`templates/rfc/rfc-default.md` の100行目から105行目（9節全体）。

### 変更内容

現行の記述:

```markdown
## 9. 実装・リリース計画 (Implementation Plan)

- {フェーズ分割（段階的リリースの場合）}
- {各フェーズの成果物とマイルストーン}
- {リスク軽減策（フィーチャーフラグ、段階ロールアウト等）}
```

変更後の記述:

```markdown
## 9. 実装・リリース計画 (Implementation Plan)

- {変更対象ファイルと作業項目の一覧}
- {作業項目間の依存関係と実施順序}
- {ロールバック基準と手順}
```

セクション見出し「## 9. 実装・リリース計画 (Implementation Plan)」は変更しない。プレースホルダの3行のみを差し替える。

### 設計の意図

- **「作業項目の一覧と順序」という平坦な構造** にすることで、Phase という階層的な区切りを排除する。Phase がなければ「後の Phase で対応」という先送りの余地がなくなる。
- **「ロールバック基準と手順」** を含めることで、段階的リリースやフィーチャーフラグの代わりに、失敗時の回復手段を明示させる。段階的リリースが必要な場合は7.4で扱えばよい。

## 6. 代替案の検討 (Alternatives Considered)

### 案A: 9節のプレースホルダを差し替え（採用案）

- **概要**: 9節の3行のプレースホルダを「作業項目一覧」「依存関係と順序」「ロールバック基準」に差し替える。セクション見出しは維持する。
- **長所**: 最小限の変更で Phase 誘導を排除できる。既存のテンプレート構造を壊さない。
- **短所**: 9節の見出し「実装・リリース計画」にはまだ「リリース」の語が残るため、Phase 的な発想を完全には排除しきれない可能性がある。

### 案B: 9節自体を削除し、他セクションに統合

- **概要**: 9節を廃止し、作業項目一覧は5節（詳細設計）に、ロールバックは7.4節（マイグレーション）に統合する。
- **長所**: Phase 誘導の温床であるセクション自体を消せる。
- **短所**: テンプレートのセクション番号体系が変わり、既存RFC との一貫性が失われる。作業項目一覧を設計セクションに混ぜると責務が不明確になる。変更範囲が大きく、他のコマンド定義やレビュー基準にも波及する。

### 選定理由

- 案A は変更が1ファイル3行に収まり、既存のテンプレート構造・セクション番号体系を維持できる。元ネタ文章の要件を過不足なく満たすため、案A を採用する。

## 7. 横断的関心事 (Cross-Cutting Concerns)

### 7.4 マイグレーションと後方互換性

- 既存の RFC ドキュメント（`docs/rfcs/` 配下）は旧テンプレートで起草されているが、遡及修正は不要である。新規 RFC から新テンプレートが適用される。
- テンプレート変更はプレースホルダの差し替えのみであるため、ロールバックは `git revert` で完了する。

## 8. テスト戦略 (Test Strategy)

- テンプレートファイルの静的なテキスト変更であるため、自動テストの対象外である。
- G1 の Verification（grep による禁止語句の不在確認）が実質的なテストとして機能する。

## 9. 実装・リリース計画 (Implementation Plan)

- `templates/rfc/rfc-default.md` の9節プレースホルダ3行を差し替える
- 依存関係なし。単一ファイルの単一箇所の変更であり、順序の考慮は不要である
- ロールバック: `git revert` で変更前の状態に復元可能
