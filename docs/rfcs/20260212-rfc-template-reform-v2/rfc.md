# [RFC] RFCテンプレート改善: 外部仕様セクション新設・Verification実施義務化・Phase禁止強化・テスト優先度廃止・非機能要件名称変更

| 項目 | 内容 |
| :--- | :--- |
| **作成者 (Author)** | Claude (RFC Author) |
| **ステータス** | Draft (起草中) |
| **作成日** | 2026-02-12 |
| **タグ** | templates, workflow, process |
| **関連リンク** | RFC `20260210-rfc-template-format-reform`, RFC `20260210-remove-phase-from-impl-plan`, RFC `20260210-strengthen-goal-verification`, `~/projects/dre-2/docs/rfcs/20260212-explore-email-delivery-rebuild/rfc.md` |

## 1. 要約 (Summary)

- RFCテンプレート（`templates/rfc/rfc-default.md`）に5つの構造的改善を施す。(1) Goals と Detailed Design の間に「外部仕様 (External Specification)」セクションを新設し、人間が「要するにどういう改修か」を理解できる記述場所を確保する。(2) Goals の Verification を `/imp` の Step 7 で全件実施することを義務化し、人間任せの放置を排除する。(3) テスト戦略から「優先度」列を廃止し、記載テストの全件実施を前提とする。(4) 実装計画の Phase/フェーズ分割をテンプレート・DoD・レビュー基準の3段で禁止する。(5)「横断的関心事」を「非機能要件 (Non-Functional Requirements)」に名称変更する。
- これらの改善に伴い、`adapters/claude/commands/rfc.md`（DoD チェック追加）、`adapters/claude/commands/imp.md`（Verification 実施義務化・適用種別作業実施義務・セクション番号更新）、`prompts/criterias/rfc-review.md`（Phase 禁止検知ルール追加）も同時に修正する。

## 2. 背景・動機 (Motivation)

- 過去のRFC改善（`20260210-rfc-template-format-reform`, `20260210-remove-phase-from-impl-plan`, `20260210-strengthen-goal-verification`）で個別の問題に対処してきたが、直近のRFC事例（`dre-2` リポジトリの `20260212-explore-email-delivery-rebuild/rfc.md`）において、複数の未解決課題が同時に露呈した。
- **外部仕様の欠落**: Summary は3〜5文の概要であり、Detailed Design は DDL・型定義等の AI 向け実装仕様である。「ユーザから見て何が変わるのか」を人間が理解できる粒度で記述するセクションが存在しない。レビュアーは Goals と Detailed Design を往復しながら全体像を推測する必要があり、レビュー効率が低い。
- **Verification の未実施**: Goals に「達成確認方法 (Verification)」が記載されるものの、実際の `/imp` 実行時に実施されず、人間任せで放置される事態が横行している。Verification を書くだけで終わりでは、Goals 達成確認の仕組み自体が形骸化する。
- **テスト優先度の悪用**: テスト戦略に「優先度」列（高/中/低）を設けると、「中」「低」のテストが実施されない逃げ道になる。dre-2 の RFC でも「優先度: 中」のテストが存在し、実装時にスキップされるリスクがある。
- **Phase 分割の再発**: RFC `20260210-remove-phase-from-impl-plan` でテンプレートの Phase 誘導プレースホルダを排除したにもかかわらず、dre-2 の RFC（2026-02-12 作成）では依然として Phase 1〜Phase 5 が使われている。テンプレートのプレースホルダ改善だけでは効果が不十分であり、DoD チェックとレビュー基準による多段防御が必要である。
- **「横断的関心事」の認知負荷**: 「横断的関心事 (Cross-Cutting Concerns)」はアスペクト指向プログラミング由来の技術用語であり、設計ドキュメントのセクション名としては専門的すぎる。「非機能要件 (Non-Functional Requirements)」が最も広く認知されている。

## 3. 目的とスコープ (Goals & Non-Goals)

### 目的 (Goals)

<!-- /imp の Step 7 で全て実施される。副作用を伴う操作は人間の承認を得て実行してよいが、実施せず人間に委ねることは不可。 -->

| # | Goal | 達成確認方法 (Verification) |
|---|------|-----------------------------|
| G1 | テンプレートにセクション4「外部仕様 (External Specification)」が新設され、Joel Spolsky の Functional Specification の定義に基づくプレースホルダが含まれること | `templates/rfc/rfc-default.md` を Read で読み込み、セクション4の見出しが「外部仕様 (External Specification)」であること、「ユーザ・運用者から見た振る舞い」「内部コンポーネント構成・型定義・DDL等の実装詳細はセクション10」という指示コメントが存在することを引用で確認する |
| G2 | テンプレートのテスト戦略から「優先度」列が廃止され、「記載したテストは全件実施」の制約が明記されていること | `templates/rfc/rfc-default.md` のテスト戦略セクションを Read で読み込み、テーブルヘッダに「優先度」列が存在しないこと、「以下に記載したテストは全件実施する」のコメントが存在することを引用で確認する |
| G3 | テンプレートの実装計画セクションに Phase/フェーズ禁止の指示、種別列（コード/適用）、完了条件が含まれること | `templates/rfc/rfc-default.md` の実装計画セクションを Read で読み込み、「Phase/フェーズによる作業分割を禁止する」コメント、テーブルに「種別」列、「完了条件」サブセクションが存在することを引用で確認する |
| G4 | テンプレートのセクション5が「非機能要件 (Non-Functional Requirements)」に名称変更されていること | `templates/rfc/rfc-default.md` を Read で読み込み、旧名称「横断的関心事 (Cross-Cutting Concerns)」が存在せず、「非機能要件 (Non-Functional Requirements)」が存在することを grep で確認する |
| G5 | `/rfc` コマンドの DoD チェックに Phase 禁止・統合テスト・単一 PR の3項目が追加されていること | `adapters/claude/commands/rfc.md` の Step 7 を Read で読み込み、「Phase/フェーズ で分割されていないこと」「統合テストの作業項目が含まれていること」「単一PRで完遂可能な規模であること」の3項目が存在することを引用で確認する |
| G6 | `/imp` コマンドの Step 7 に Verification 実施義務化の制約が追加されていること | `adapters/claude/commands/imp.md` の Step 7 を Read で読み込み、「副作用を伴う操作は実行前にユーザに承認を求め、承認を得た上で実行せよ」「Verification の実行をスキップし、後続の人間作業として残すことは禁止する」の2文が存在することを引用で確認する |
| G7 | `/imp` コマンドの Step 5 に適用種別の作業実施義務が含まれていること | `adapters/claude/commands/imp.md` の Step 5 を Read で読み込み、実装計画の「適用」種別（DBマイグレーション実行、cron登録等）の作業について、作成だけでなく実行まで行う旨の指示が存在することを引用で確認する |
| G8 | レビュー基準の Approach Reviewer に Phase 禁止の検知ルールが追加されていること | `prompts/criterias/rfc-review.md` を Read で読み込み、「Phase/フェーズで分割されていないか」「Phase 2で対応」「後続PRで対応」等の先送り記載の検知が P0 として明記されていることを引用で確認する |
| G9 | テンプレートのセクション番号が正しく再編されていること（1〜10の全10セクション） | `templates/rfc/rfc-default.md` を Read で読み込み、セクション番号と見出しの順序が「1.要約, 2.背景, 3.目的, 4.外部仕様, 5.テスト戦略, 6.非機能要件, 7.代替案, 8.実装計画, 9.前提条件, 10.詳細設計」であることを確認する |
| G10 | `/imp` コマンドのセクション番号参照が新番号（セクション10）に更新されていること | `adapters/claude/commands/imp.md` を Read で読み込み、「RFC の詳細設計（セクション10）」という記載が存在し、旧番号（セクション9）への参照が存在しないことを確認する |

### やらないこと (Non-Goals)

- 既存の起草済み RFC（`docs/rfcs/` 配下）のフォーマット遡及修正は行わない。新規 RFC から新テンプレートが適用される。
- `/rrfc` コマンド定義自体の変更は行わない。レビュー基準ファイル（`prompts/criterias/rfc-review.md`）の変更により、`/rrfc` の動作に間接的に反映される。
- 実装レビュー基準（`prompts/criterias/impl-review.md`）の変更は行わない。本 RFC のスコープは RFC テンプレートと RFC 関連ワークフローに限定する。

## 4. 外部仕様 (External Specification)

<!-- ユーザ・運用者から見た振る舞いの変更を中心に記述せよ。 -->
<!-- 内部コンポーネント構成・型定義・DDL等の実装詳細はセクション10（詳細設計）に記載すること。 -->

### 変更の全体像

- `/rfc` コマンドで RFC を起草すると、新テンプレートが適用される。テンプレートのセクション構成が1〜9（全9セクション）から1〜10（全10セクション）に変更され、セクション4「外部仕様」が新設される。
- `/imp` コマンドの Step 7 で、Verification が必ず実行される。副作用を伴う操作は人間に承認を求めた上で実行するが、実施自体をスキップすることは禁止される。
- `/rrfc` コマンドによるレビューで、実装計画が Phase/フェーズで分割されている場合は P0 として検出される。

### 外部仕様

#### CLI インターフェース

- `/rfc` コマンド: Step 7 の DoD チェック項目が3項目追加される。ユーザ操作に変更はない。
- `/imp` コマンド: Step 5 で「適用」種別の作業（DBマイグレーション実行等）を実施する義務が追加される。Step 7 で Verification を必ず実行し、スキップが禁止される。副作用のある操作は事前にユーザ承認を求める。
- `/rrfc` コマンド: Approach Reviewer が Phase 分割を P0 として検出するようになる。

#### 主要な振る舞い

- 新テンプレートで起草された RFC は、テスト戦略に「優先度」列を持たない。記載された全テストが実施対象となる。
- 実装計画は Phase/フェーズを使わず、フラットな番号付きリストで記述される。全作業項目が単一 PR で完遂される前提となる。

#### 削除・廃止される機能

- テスト戦略の「優先度」列が廃止される。
- 「横断的関心事 (Cross-Cutting Concerns)」というセクション名称が廃止され、「非機能要件 (Non-Functional Requirements)」に置き換えられる。

## 5. テスト戦略 (Test Strategy)

### 実施するテスト

<!-- 以下に記載したテストは全件実施する。実施しないテストは記載しないこと。 -->

| テスト対象 | テスト種別 | 検証観点 |
|---|---|---|
| `templates/rfc/rfc-default.md` | 目視（Read による引用確認） | セクション構成・番号・見出しが要件通りであること |
| `adapters/claude/commands/rfc.md` | 目視（Read による引用確認） | DoD チェック項目が追加されていること |
| `adapters/claude/commands/imp.md` | 目視（Read による引用確認） | Verification 実施義務化・適用種別実施義務・セクション番号参照が更新されていること |
| `prompts/criterias/rfc-review.md` | 目視（Read による引用確認） | Phase 禁止検知ルールが追加されていること |
| テンプレート全体 | grep | 旧名称「横断的関心事」「Cross-Cutting Concerns」が残存していないこと |
| テンプレート全体 | grep | 「Phase」「フェーズ」が実装計画のプレースホルダに残存していないこと（禁止コメント内の言及は除く） |

### 境界値・エッジケース

- 対象がすべて Markdown ファイルのテキスト変更であるため、境界値・異常系の自動テストは不要である。

## 6. 非機能要件 (Non-Functional Requirements)

<!-- 該当するサブセクションのみ記載せよ。該当しないものは削除すること。 -->
<!-- 各項目は1〜3行で簡潔に。詳細な設計はセクション10（詳細設計）に記載する。 -->

### 6.1 マイグレーションと後方互換性

- テンプレートの変更は新規 RFC 起草時にのみ影響する。既存の起草済み RFC は旧フォーマットのまま残り、後方互換性の問題は発生しない。
- `/imp` コマンドのセクション番号参照は、新テンプレートで起草された RFC に対してのみ有効である。旧テンプレートの RFC を `/imp` で実装する場合、セクション番号が異なるが、`/imp` の Step 4 は「RFC の詳細設計」という文言で内容を特定しており、セクション番号はヒントに過ぎないため実運用上の問題は軽微である。
- csync による全リポジトリ同期後、次回の `/rfc` 実行から新テンプレートが適用される。

## 7. 代替案の検討 (Alternatives Considered)

<!-- 最低2案を比較し、選定理由を明示する。各案の説明は1行に収めること。 -->

| 案 | 概要 | 採否 | 決定的理由 |
|---|---|---|---|
| A: 5改善の一括実施 | テンプレート・コマンド・レビュー基準を同時に修正し、セクション番号を再編する | **採用** | 5改善は相互に関連し、セクション番号の再編を伴うため一括実施が合理的。個別 RFC では番号再編が複数回発生し、参照整合性の維持が困難になる |
| B: 改善ごとに個別 RFC を起票 | 各改善を独立した RFC として起票し、順次実装する | 却下 | セクション番号の再編が最大5回発生する。各 RFC 間でテンプレートの中間状態を管理する必要があり、コンフリクトリスクが高い |
| C: 外部仕様セクションを新設せず Summary を拡充する | Summary の記述量制限を緩和し、外部仕様の役割を担わせる | 却下 | Summary は「3〜5文で簡潔に」という設計意図があり、詳細な外部仕様を記述する場所ではない。役割の混在は両方の品質を下げる |

## 8. 実装・リリース計画 (Implementation Plan)

<!-- Phase/フェーズによる作業分割を禁止する。作業項目をフラットな番号付きリストで記述せよ。 -->
<!-- ここに記載した全作業項目は、単一のPRで完遂すること。部分実装での完了報告は不可。 -->

### 作業項目

<!-- 1作業 = 1コミット程度の粒度。統合テストの実行を含めること。 -->

| # | 種別 | 作業内容 | 依存 |
|---|------|---------|------|
| 1 | コード | `templates/rfc/rfc-default.md` の全面改修: セクション4「外部仕様」新設、セクション5「テスト戦略」の優先度列廃止、セクション6 名称変更（非機能要件）、セクション8「実装計画」の Phase 禁止・種別列・完了条件追加、セクション番号の再編（全10セクション） | - |
| 2 | コード | `adapters/claude/commands/rfc.md` の Step 7 に DoD チェック3項目追加（Phase 禁止・統合テスト・単一 PR） | - |
| 3 | コード | `adapters/claude/commands/imp.md` の Step 5 に適用種別作業の実施義務を追加、Step 7 に Verification 実施義務化の制約を追加、Step 4 のセクション番号参照をセクション10に更新 | - |
| 4 | コード | `prompts/criterias/rfc-review.md` の Approach Reviewer に Phase 禁止検知ルール2項目を追加 | - |
| 5 | コード | 全変更ファイルの Goals Verification を実行し、全 Goal が OK であることを確認する | #1, #2, #3, #4 |

<!-- 種別の定義: -->
<!-- - コード: ソースコード・設定ファイルの作成・変更・削除 -->
<!-- - 適用: 状態変更の実行（DBマイグレーション、cron登録、パッケージインストール等）。作成だけでなく実行まで含む -->

### 完了条件

- 上記の全作業項目が完了していること
- Goals の Verification が全て OK であること
- テスト戦略に記載した全テストが通過していること

### ロールバック基準と手順

- **基準**: 変更後のテンプレートやコマンド定義が意図しない動作を引き起こす場合
- **手順**: 各ファイルの変更を `git revert` するだけで完了する。全変更が Markdown ファイルのテキスト修正であるため、副作用はない

### システム概要ドキュメントへの影響

- `docs/architecture.md`, `docs/domain-model.md`, `docs/api-overview.md` は vdev リポジトリに存在しないため、更新対象はない。

## 9. 前提条件・依存関係 (Prerequisites & Dependencies)

- RFC `20260210-rfc-template-format-reform`（テンプレートフォーマット改善）が承認・マージ済みであること。本 RFC は当該 RFC で導入されたセクション順序（1.要約〜9.詳細設計）を前提とし、その上にセクション追加・名称変更を施す。
- RFC `20260210-remove-phase-from-impl-plan`（Phase 分割排除）が承認・マージ済みであること。本 RFC は Phase 排除をさらに強化する改善であり、テンプレートの現行プレースホルダを前提とする。
- RFC `20260210-strengthen-goal-verification`（Goals 達成確認の厳格化）が承認・マージ済みであること。本 RFC は Verification の実施義務化という追加制約を導入する。
- 変更対象は vdev リポジトリ内の Markdown ファイル4つのみである。外部ツールやライブラリへの依存はない。

## 10. 詳細設計 (Detailed Design)

### 10.1 テンプレート変更: `templates/rfc/rfc-default.md`

変更後のテンプレート全体構成:

```markdown
## 1. 要約 (Summary)
## 2. 背景・動機 (Motivation)
## 3. 目的とスコープ (Goals & Non-Goals)
## 4. 外部仕様 (External Specification)        ← ★新設
## 5. テスト戦略 (Test Strategy)                ← 優先度廃止
## 6. 非機能要件 (Non-Functional Requirements)  ← ★名称変更
## 7. 代替案の検討 (Alternatives Considered)
## 8. 実装・リリース計画 (Implementation Plan)  ← Phase禁止、種別列、完了条件
## 9. 前提条件・依存関係 (Prerequisites & Dependencies)
## 10. 詳細設計 (Detailed Design)
```

#### 10.1.1 セクション3: Goals テーブルの Verification 制約強化

現行:
```markdown
| G1 | {達成すべき具体的な目標} | {実装完了後に達成を検証する具体的手順。「記載があること」のような実装と同義の確認は不可。コマンド実行結果、テスト通過、動作確認手順など、実装とは独立した検証手段を記述すること} |
```

変更後:
```markdown
| G1 | {達成すべき具体的な目標} | {実装完了後に達成を検証する具体的手順。「記載があること」のような実装と同義の確認は不可。コマンド実行結果、テスト通過、動作確認手順など、実装とは独立した検証手段を記述すること。/imp の Step 7 で全て実施される。副作用を伴う操作は人間の承認を得て実行してよいが、実施せず人間に委ねることは不可} |
```

#### 10.1.2 セクション4: 外部仕様（新設）

```markdown
## 4. 外部仕様 (External Specification)

<!-- ユーザ・運用者から見た振る舞いの変更を中心に記述せよ。 -->
<!-- 内部コンポーネント構成・型定義・DDL等の実装詳細はセクション10（詳細設計）に記載すること。 -->

### 変更の全体像

- {何を、どう変えるのかを端的に記述}

### 外部仕様

<!-- 以下は記述対象の例。該当するものだけ記述し、該当しないものは削除すること。 -->

#### CLI / API インターフェース
- {コマンド、引数、オプション、入出力形式}
- {ユーザから見た操作フローと期待される応答}

#### データフロー
- {入力から出力まで、ユーザが認知できる粒度でのデータの流れ}

#### 主要な振る舞い
- {エラー時の挙動、リトライ、冪等性など、ユーザに影響する設計判断}

#### 削除・廃止される機能
- {破壊的変更がある場合、何がなくなるか}
```

設計根拠:
- Joel Spolsky の Functional Specification の定義「A functional specification describes how a product will work entirely from the user's perspective. It doesn't care how the thing is implemented.」に基づく。
- 内部コンポーネントのインベントリ（ファイル名の列挙）ではなく、ユーザ・運用者から見た振る舞いの変更を中心に記述させる。Detailed Design との役割分担を HTML コメントで明示する。
- 該当しないサブセクションは削除する指示により、プレースホルダの残存を防止する。

#### 10.1.3 セクション5: テスト戦略（優先度廃止）

現行:
```markdown
## 4. テスト戦略 (Test Strategy)

- {テスト対象の範囲と優先度}
- {テスト種別（ユニット / 統合 / E2E）ごとの方針}
- {境界値・エッジケース・異常系の検証観点}
```

変更後:
```markdown
## 5. テスト戦略 (Test Strategy)

### 実施するテスト

<!-- 以下に記載したテストは全件実施する。実施しないテストは記載しないこと。 -->

| テスト対象 | テスト種別 | 検証観点 |
|---|---|---|
| {コンポーネント名} | ユニット / 統合 / E2E | {何を検証するか} |

### 境界値・エッジケース

- {検証が必要な境界値・異常系の列挙}
```

設計根拠:
- 「優先度」列を廃止することで、「中」「低」のテストをスキップする逃げ道を排除する。記載されたテストは全件実施が前提となる。
- 「実施しないテストは記載しないこと」の指示により、実施しないテストを優先度低として記載する慣行を断つ。

#### 10.1.4 セクション6: 非機能要件（名称変更）

現行:
```markdown
## 5. 横断的関心事 (Cross-Cutting Concerns)
### 5.1 セキュリティとプライバシー
### 5.2 スケーラビリティとパフォーマンス
### 5.3 可観測性 (Observability)
### 5.4 マイグレーションと後方互換性
```

変更後:
```markdown
## 6. 非機能要件 (Non-Functional Requirements)
### 6.1 セキュリティとプライバシー
### 6.2 スケーラビリティとパフォーマンス
### 6.3 可観測性 (Observability)
### 6.4 マイグレーションと後方互換性
```

セクション見出しのみ変更し、サブセクション構成・HTML コメント・プレースホルダは現行を維持する。

#### 10.1.5 セクション8: 実装・リリース計画（Phase 禁止・種別列・完了条件）

現行:
```markdown
## 7. 実装・リリース計画 (Implementation Plan)

- {変更対象ファイルと作業項目の一覧}
- {作業項目間の依存関係と実施順序}
- {ロールバック基準と手順}
```

変更後:
```markdown
## 8. 実装・リリース計画 (Implementation Plan)

<!-- Phase/フェーズによる作業分割を禁止する。作業項目をフラットな番号付きリストで記述せよ。 -->
<!-- ここに記載した全作業項目は、単一のPRで完遂すること。部分実装での完了報告は不可。 -->

### 作業項目

<!-- 1作業 = 1コミット程度の粒度。統合テストの実行を含めること。 -->

| # | 種別 | 作業内容 | 依存 |
|---|------|---------|------|
| 1 | コード | {ファイルの作成・変更・削除} | - |
| 2 | 適用 | {DBマイグレーション実行、crontab登録等} | #1 |

<!-- 種別の定義: -->
<!-- - コード: ソースコード・設定ファイルの作成・変更・削除 -->
<!-- - 適用: 状態変更の実行（DBマイグレーション、cron登録、パッケージインストール等）。作成だけでなく実行まで含む -->

### 完了条件

- 上記の全作業項目が完了していること
- Goals の Verification が全て OK であること
- テスト戦略に記載した全テストが通過していること

### ロールバック基準と手順

- {ロールバック基準}
- {ロールバック手順}
```

設計根拠:
- Phase/フェーズ禁止を HTML コメントで明記し、テンプレートの段階で Phase 分割を抑止する。
- 「種別」列（コード/適用）の導入により、「コード変更を作成したが DB マイグレーション等の実行は人間に委ねる」という先送りを防止する。「適用」種別は「作成だけでなく実行まで含む」ことを種別定義で明記する。
- 完了条件を明示することで、部分実装での完了報告を禁止する。

### 10.2 `/rfc` コマンド変更: `adapters/claude/commands/rfc.md`

**変更箇所**: Step 7 の DoD チェックリストに3項目を追加する。

現行の Step 7:
```markdown
- [ ] 背景・動機が記述されていること
- [ ] 目的・スコープ（Goals / Non-Goals）が明確であること
- [ ] 具体的な設計案が記述されていること
- [ ] 代替案とその比較（トレードオフ）が示されていること
- [ ] 実装・リリース計画に検証方法が含まれていること
- [ ] システム概要ドキュメントへの影響が判断されていること
```

追加する3項目:
```markdown
- [ ] 実装・リリース計画が Phase/フェーズ で分割されていないこと
- [ ] 実装・リリース計画に統合テストの作業項目が含まれていること
- [ ] 実装・リリース計画の全作業項目が単一PRで完遂可能な規模であること
```

### 10.3 `/imp` コマンド変更: `adapters/claude/commands/imp.md`

#### 10.3.1 Step 4: セクション番号参照の更新

現行:
```
- RFC の詳細設計（セクション9）から、変更・新規作成が必要なファイルを特定する
```

変更後:
```
- RFC の詳細設計（セクション10）から、変更・新規作成が必要なファイルを特定する
```

#### 10.3.2 Step 5: 適用種別作業の実施義務追加

現行の Step 5 の末尾に以下を追加する:

```markdown
- RFC の実装・リリース計画に「適用」種別（DBマイグレーション実行、crontab登録、パッケージインストール等）の作業項目がある場合は、作成だけでなく実行まで行うこと。副作用を伴う操作は実行前にユーザに承認を求めよ。
```

#### 10.3.3 Step 7: Verification 実施義務化

現行の Step 7 の箇条書き2（各 Goal の Verification 実行指示）の末尾に以下を追加する:

```markdown
   - 副作用を伴う操作は実行前にユーザに承認を求め、承認を得た上で実行せよ。
   - **Verification の実行をスキップし、後続の人間作業として残すことは禁止する。** すべての Verification はこの Step で完了させること。
```

### 10.4 レビュー基準変更: `prompts/criterias/rfc-review.md`

**変更箇所**: Approach Reviewer セクションの末尾に2項目を追加する。

追加する項目:
```markdown
- 実装・リリース計画が Phase/フェーズで分割されていないか。分割されている場合は P0。
- 実装計画の全作業項目が単一PRで完遂される前提になっているか。「Phase 2で対応」「後続PRで対応」等の先送り記載がある場合は P0。
```

### 10.5 変更後のテンプレート全文

以下に `templates/rfc/rfc-default.md` の変更後の全文を示す:

```markdown
# [RFC] {提案タイトル}

| 項目 | 内容 |
| :--- | :--- |
| **作成者 (Author)** | {User / AI Name} |
| **ステータス** | Draft (起草中) / Review (レビュー中) / Accepted (承認済) / Rejected (却下) |
| **作成日** | YYYY-MM-DD |
| **タグ** | {コンポーネント名}, {優先度} |
| **関連リンク** | {関連Issue・既存RFC・参考PRのURLを列挙} |

## 1. 要約 (Summary)

- {提案の全体像を3〜5文で簡潔に記述する}

## 2. 背景・動機 (Motivation)

- {なぜこの変更が必要か、現状の課題は何か}
- {ユーザーやシステムへの影響、放置した場合のリスク}

## 3. 目的とスコープ (Goals & Non-Goals)

### 目的 (Goals)

| # | Goal | 達成確認方法 (Verification) |
|---|------|-----------------------------|
| G1 | {達成すべき具体的な目標} | {実装完了後に達成を検証する具体的手順。「記載があること」のような実装と同義の確認は不可。コマンド実行結果、テスト通過、動作確認手順など、実装とは独立した検証手段を記述すること。/imp の Step 7 で全て実施される。副作用を伴う操作は人間の承認を得て実行してよいが、実施せず人間に委ねることは不可} |
| G2 | ... | ... |

### やらないこと (Non-Goals)

- {あえてやらないこと、スコープ外のこと}
- {将来の課題として先送りするもの}

## 4. 外部仕様 (External Specification)

<!-- ユーザ・運用者から見た振る舞いの変更を中心に記述せよ。 -->
<!-- 内部コンポーネント構成・型定義・DDL等の実装詳細はセクション10（詳細設計）に記載すること。 -->

### 変更の全体像

- {何を、どう変えるのかを端的に記述}

### 外部仕様

<!-- 以下は記述対象の例。該当するものだけ記述し、該当しないものは削除すること。 -->

#### CLI / API インターフェース
- {コマンド、引数、オプション、入出力形式}
- {ユーザから見た操作フローと期待される応答}

#### データフロー
- {入力から出力まで、ユーザが認知できる粒度でのデータの流れ}

#### 主要な振る舞い
- {エラー時の挙動、リトライ、冪等性など、ユーザに影響する設計判断}

#### 削除・廃止される機能
- {破壊的変更がある場合、何がなくなるか}

## 5. テスト戦略 (Test Strategy)

### 実施するテスト

<!-- 以下に記載したテストは全件実施する。実施しないテストは記載しないこと。 -->

| テスト対象 | テスト種別 | 検証観点 |
|---|---|---|
| {コンポーネント名} | ユニット / 統合 / E2E | {何を検証するか} |

### 境界値・エッジケース

- {検証が必要な境界値・異常系の列挙}

## 6. 非機能要件 (Non-Functional Requirements)

<!-- 該当するサブセクションのみ記載せよ。該当しないものは削除すること。 -->
<!-- 各項目は1〜3行で簡潔に。詳細な設計はセクション10（詳細設計）に記載する。 -->

### 6.1 セキュリティとプライバシー

- {認証・認可、データ保護、OWASP Top 10 への対処}

### 6.2 スケーラビリティとパフォーマンス

- {負荷見積もり、ボトルネック、キャッシュ戦略}

### 6.3 可観測性 (Observability)

- {ログ、メトリクス、トレーシングの方針}

### 6.4 マイグレーションと後方互換性

- {既存データの移行手順、破壊的変更の有無}
- {ロールバック手順、後方互換性の担保方法}

## 7. 代替案の検討 (Alternatives Considered)

<!-- 最低2案を比較し、選定理由を明示する。各案の説明は1行に収めること。 -->

| 案 | 概要 | 採否 | 決定的理由 |
|---|---|---|---|
| A: {名称} | {アプローチの1行要約} | **採用** | {選んだ決め手} |
| B: {名称} | {アプローチの1行要約} | 却下 | {却下の決め手} |

## 8. 実装・リリース計画 (Implementation Plan)

<!-- Phase/フェーズによる作業分割を禁止する。作業項目をフラットな番号付きリストで記述せよ。 -->
<!-- ここに記載した全作業項目は、単一のPRで完遂すること。部分実装での完了報告は不可。 -->

### 作業項目

<!-- 1作業 = 1コミット程度の粒度。統合テストの実行を含めること。 -->

| # | 種別 | 作業内容 | 依存 |
|---|------|---------|------|
| 1 | コード | {ファイルの作成・変更・削除} | - |
| 2 | 適用 | {DBマイグレーション実行、crontab登録等} | #1 |

<!-- 種別の定義: -->
<!-- - コード: ソースコード・設定ファイルの作成・変更・削除 -->
<!-- - 適用: 状態変更の実行（DBマイグレーション、cron登録、パッケージインストール等）。作成だけでなく実行まで含む -->

### 完了条件

- 上記の全作業項目が完了していること
- Goals の Verification が全て OK であること
- テスト戦略に記載した全テストが通過していること

### ロールバック基準と手順

- {ロールバック基準}
- {ロールバック手順}

## 9. 前提条件・依存関係 (Prerequisites & Dependencies)

- {前提となる環境条件やインフラ要件}
- {依存する外部サービス・チーム・ライブラリ}

## 10. 詳細設計 (Detailed Design)

<!-- 該当しないサブセクションは削除してよい -->

### 10.1 システムアーキテクチャ

- {コンポーネント構成、データフロー}

### 10.2 データモデル / スキーマ

- {テーブル定義、スキーマ変更、状態遷移}

### 10.3 インターフェース / API定義

- {エンドポイント、リクエスト/レスポンス、エラーケース}
```
